#Dev version to grab files from my local machine

version: '3' # specify docker-compose version

# Define the services/containers to be run
services:
  angular: # name of the first service
    build: ./client-app-dev # specify the directory of the Dockerfile
    ports:
      - "4200:4200" # specify port forwarding
    volumes:
      - ./client-app:/usr/src/garden-app-dev

  express-ts-alpine: #name of the second service
    build: express-ts-server # specify the directory of the Dockerfile
    ports:
      - "3000:3000" #specify ports forwarding
    links:
      - database # link this service to the database service
      - tensorflow-serving
    volumes:
      - ./express-ts-server:/usr/src/express-ts-app
      - /usr/src/express-ts-app/node_modules # to prevent the local directory covering over the installed modules

  database: # name of the third service
    image: mongo # specify image to build container from
    ports:
      - "27017:27017" # specify port forwarding
    volumes: 
      - ./database:/data/db

  tensorflow-serving:
    image: 'bitnami/tensorflow-serving:latest'
    ports:
      - '9000:9000'
    volumes:
      - /home/sapporo/Coding/DeepLearning/GardenApp/tensorflow-serving/models:/bitnami/model-data
      - /home/sapporo/Coding/DeepLearning/GardenApp/tensorflow-serving/config:/bitnami/tensorflow-serving
