"use strict";
const express = require("express");
const ClassifiedImageController = require("./../../controllers/ClassifiedImageController");
const router = express.Router();
const multer = require('multer');
// multer middleware for single upload
// TODO move to controller
// TODO set max upload size
const upload = multer({
    storage: multer.memoryStorage() // TODO read from a temp store instead this can use too much memory
}).single('file');
class ClassifiedImageRoutes {
    constructor() {
        this._classifieImageController = new ClassifiedImageController();
    }
    get routes() {
        const controller = this._classifieImageController;
        router.get('/allClassifiedImages', controller.retrieve);
        router.post('/classifyImage', upload, controller.create, controller.classify);
        router.put('/classifiedImages/:_id', controller.update);
        router.get('/classifiedImages/:_id', controller.findById);
        router.get('/classifiedImages/:_id/image', controller.findImageFileById);
        router.delete('/classifiedImages/:_id', controller.delete); // TODO permission this
        return router;
    }
}
Object.seal(ClassifiedImageRoutes);
module.exports = ClassifiedImageRoutes;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9jb25maWcvcm91dGVzL0NsYXNzaWZpZWRJbWFnZVJvdXRlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsbUNBQW9DO0FBQ3BDLDJGQUE0RjtBQUU1RixNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDaEMsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBRWpDLHNDQUFzQztBQUN0QywwQkFBMEI7QUFDMUIsMkJBQTJCO0FBQzNCLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUNsQixPQUFPLEVBQUcsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDLG1FQUFtRTtDQUN2RyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBRWxCO0lBR0U7UUFDRSxJQUFJLENBQUMseUJBQXlCLEdBQUcsSUFBSSx5QkFBeUIsRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFDRCxJQUFJLE1BQU07UUFDUixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMseUJBQXlCLENBQUM7UUFDbEQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRSxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDeEQsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxNQUFNLEVBQUUsVUFBVSxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDOUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsRUFBRSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDeEQsTUFBTSxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsRUFBRSxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDMUQsTUFBTSxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsRUFBRSxVQUFVLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUN6RSxNQUFNLENBQUMsTUFBTSxDQUFDLHdCQUF3QixFQUFFLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLHVCQUF1QjtRQUVuRixNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hCLENBQUM7Q0FFRjtBQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQztBQUNuQyxpQkFBUyxxQkFBcUIsQ0FBQyIsImZpbGUiOiJzcmMvY29uZmlnL3JvdXRlcy9DbGFzc2lmaWVkSW1hZ2VSb3V0ZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmltcG9ydCBDbGFzc2lmaWVkSW1hZ2VDb250cm9sbGVyID0gcmVxdWlyZSgnLi8uLi8uLi9jb250cm9sbGVycy9DbGFzc2lmaWVkSW1hZ2VDb250cm9sbGVyJyk7XG5cbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5jb25zdCBtdWx0ZXIgPSByZXF1aXJlKCdtdWx0ZXInKTtcblxuLy8gbXVsdGVyIG1pZGRsZXdhcmUgZm9yIHNpbmdsZSB1cGxvYWRcbi8vIFRPRE8gbW92ZSB0byBjb250cm9sbGVyXG4vLyBUT0RPIHNldCBtYXggdXBsb2FkIHNpemVcbmNvbnN0IHVwbG9hZCA9IG11bHRlcih7XG4gICAgc3RvcmFnZSA6IG11bHRlci5tZW1vcnlTdG9yYWdlKCkgLy8gVE9ETyByZWFkIGZyb20gYSB0ZW1wIHN0b3JlIGluc3RlYWQgdGhpcyBjYW4gdXNlIHRvbyBtdWNoIG1lbW9yeVxufSkuc2luZ2xlKCdmaWxlJyk7XG5cbmNsYXNzIENsYXNzaWZpZWRJbWFnZVJvdXRlcyB7XG4gIHByaXZhdGUgX2NsYXNzaWZpZUltYWdlQ29udHJvbGxlcjogQ2xhc3NpZmllZEltYWdlQ29udHJvbGxlcjtcblxuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5fY2xhc3NpZmllSW1hZ2VDb250cm9sbGVyID0gbmV3IENsYXNzaWZpZWRJbWFnZUNvbnRyb2xsZXIoKTtcbiAgfVxuICBnZXQgcm91dGVzICgpIHtcbiAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5fY2xhc3NpZmllSW1hZ2VDb250cm9sbGVyO1xuICAgIHJvdXRlci5nZXQoJy9hbGxDbGFzc2lmaWVkSW1hZ2VzJywgY29udHJvbGxlci5yZXRyaWV2ZSk7XG4gICAgcm91dGVyLnBvc3QoJy9jbGFzc2lmeUltYWdlJywgdXBsb2FkLCBjb250cm9sbGVyLmNyZWF0ZSwgY29udHJvbGxlci5jbGFzc2lmeSk7XG4gICAgcm91dGVyLnB1dCgnL2NsYXNzaWZpZWRJbWFnZXMvOl9pZCcsIGNvbnRyb2xsZXIudXBkYXRlKTtcbiAgICByb3V0ZXIuZ2V0KCcvY2xhc3NpZmllZEltYWdlcy86X2lkJywgY29udHJvbGxlci5maW5kQnlJZCk7XG4gICAgcm91dGVyLmdldCgnL2NsYXNzaWZpZWRJbWFnZXMvOl9pZC9pbWFnZScsIGNvbnRyb2xsZXIuZmluZEltYWdlRmlsZUJ5SWQpO1xuICAgIHJvdXRlci5kZWxldGUoJy9jbGFzc2lmaWVkSW1hZ2VzLzpfaWQnLCBjb250cm9sbGVyLmRlbGV0ZSk7IC8vIFRPRE8gcGVybWlzc2lvbiB0aGlzXG5cbiAgICByZXR1cm4gcm91dGVyO1xuICB9XG5cbn1cblxuT2JqZWN0LnNlYWwoQ2xhc3NpZmllZEltYWdlUm91dGVzKTtcbmV4cG9ydCA9IENsYXNzaWZpZWRJbWFnZVJvdXRlcztcbiJdfQ==
