// <reference path="../../../../typings/tsd.d.ts" />
"use strict";
const mongoose = require("mongoose");
class RepositoryBase {
    constructor(schemaModel) {
        this._model = schemaModel;
    }
    create(item, callback) {
        this._model.create(item, callback);
    }
    retrieve(callback) {
        this._model.find({}, callback);
    }
    update(_id, item, callback) {
        this._model.update({ _id: _id }, item, callback);
    }
    delete(_id, callback) {
        this._model.remove({ _id: this.toObjectId(_id) }, (err) => callback(err, null));
    }
    findById(_id, callback) {
        this._model.findById(_id, callback);
    }
    toObjectId(_id) {
        return mongoose.Types.ObjectId.createFromHexString(_id);
    }
}
module.exports = RepositoryBase;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVwb3NpdG9yeS9iYXNlL1JlcG9zaXRvcnlCYXNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFHLG9EQUFvRDs7QUFNdkQscUNBQXNDO0FBRXRDO0lBSUksWUFBYSxXQUE4QztRQUN2RCxJQUFJLENBQUMsTUFBTSxHQUFHLFdBQVcsQ0FBQztJQUM5QixDQUFDO0lBRUQsTUFBTSxDQUFFLElBQU8sRUFBRSxRQUEyQztRQUN4RCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFdkMsQ0FBQztJQUVELFFBQVEsQ0FBRSxRQUEyQztRQUNoRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELE1BQU0sQ0FBRSxHQUE0QixFQUFFLElBQU8sRUFBRSxRQUEyQztRQUNsRixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFdkQsQ0FBQztJQUVELE1BQU0sQ0FBRSxHQUFXLEVBQUUsUUFBMkM7UUFDNUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBQyxFQUFFLENBQUMsR0FBRyxLQUFLLFFBQVEsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUVsRixDQUFDO0lBRUQsUUFBUSxDQUFFLEdBQVcsRUFBRSxRQUF5QztRQUM1RCxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBRSxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVPLFVBQVUsQ0FBRSxHQUFXO1FBQzNCLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM1RCxDQUFDO0NBRUo7QUFFRCxpQkFBUyxjQUFjLENBQUMiLCJmaWxlIjoic3JjL2FwcC9yZXBvc2l0b3J5L2Jhc2UvUmVwb3NpdG9yeUJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgICAvLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cblxuaW1wb3J0IElSZWFkID0gcmVxdWlyZSgnLi8uLi9pbnRlcmZhY2VzL2Jhc2UvUmVhZCcpO1xuaW1wb3J0IElXcml0ZSA9IHJlcXVpcmUoJy4vLi4vaW50ZXJmYWNlcy9iYXNlL1dyaXRlJyk7XG5pbXBvcnQgSUZsb3dlck1vZGVsID0gcmVxdWlyZSgnLi8uLi8uLi9tb2RlbC9pbnRlcmZhY2VzL0Zsb3dlck1vZGVsJyk7XG5cbmltcG9ydCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5cbmNsYXNzIFJlcG9zaXRvcnlCYXNlPFQgZXh0ZW5kcyBtb25nb29zZS5Eb2N1bWVudD4gaW1wbGVtZW50cyBJUmVhZDxUPiwgSVdyaXRlPFQ+IHtcblxuICAgIHByaXZhdGUgX21vZGVsOiBtb25nb29zZS5Nb2RlbDxtb25nb29zZS5Eb2N1bWVudD47XG5cbiAgICBjb25zdHJ1Y3RvciAoc2NoZW1hTW9kZWw6IG1vbmdvb3NlLk1vZGVsPG1vbmdvb3NlLkRvY3VtZW50Pikge1xuICAgICAgICB0aGlzLl9tb2RlbCA9IHNjaGVtYU1vZGVsO1xuICAgIH1cblxuICAgIGNyZWF0ZSAoaXRlbTogVCwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl9tb2RlbC5jcmVhdGUoaXRlbSwgY2FsbGJhY2spO1xuXG4gICAgfVxuXG4gICAgcmV0cmlldmUgKGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHZvaWQpIHtcbiAgICAgICAgIHRoaXMuX21vZGVsLmZpbmQoe30sIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICB1cGRhdGUgKF9pZDogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQsIGl0ZW06IFQsIGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHZvaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX21vZGVsLnVwZGF0ZSh7X2lkOiBfaWR9LCBpdGVtLCBjYWxsYmFjayk7XG5cbiAgICB9XG5cbiAgICBkZWxldGUgKF9pZDogc3RyaW5nLCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnJlbW92ZSh7X2lkOiB0aGlzLnRvT2JqZWN0SWQoX2lkKX0sIChlcnIpID0+IGNhbGxiYWNrKGVyciwgbnVsbCkpO1xuXG4gICAgfVxuXG4gICAgZmluZEJ5SWQgKF9pZDogc3RyaW5nLCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogVCkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl9tb2RlbC5maW5kQnlJZCggX2lkLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b09iamVjdElkIChfaWQ6IHN0cmluZyk6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkIHtcbiAgICAgICAgcmV0dXJuIG1vbmdvb3NlLlR5cGVzLk9iamVjdElkLmNyZWF0ZUZyb21IZXhTdHJpbmcoX2lkKTtcbiAgICB9XG5cbn1cblxuZXhwb3J0ID0gUmVwb3NpdG9yeUJhc2U7XG4iXX0=
